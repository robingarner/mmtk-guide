\begin{tikzpicture}

\newcommand*{\planRow}{-0}
\newcommand*{\parRow}{-2}
\newcommand*{\simpleRow}{-4}
\newcommand*{\stwRow}{-6}
\newcommand*{\msRow}{-9}

\newcommand*{\planCol}{+1}
\newcommand*{\mutCol}{+8}
\newcommand*{\collCol}{+12}
\newcommand*{\conCol}{+4.5}
\newcommand*{\traceCol}{+16}

\begin{umlpackage}{{org.mmtk.}plan}
\umlclass[y=\planRow,x=\planCol]{Plan}{
}{}
\umlclass[y=\simpleRow,x=\planCol]{Simple}{
}{}
\umlclass[y=\stwRow,x=\planCol]{StopTheWorld}{
}{}

\umlclass[y=\planRow,x=\mutCol]{MutatorContext}{
}{}
\umlclass[y=\simpleRow,x=\mutCol]{SimpleMutator}{
}{}
\umlclass[y=\stwRow,x=\mutCol]{{S.T.W.}Mutator}{
}{}

\umlclass[y=\planRow,x=\collCol]{CollectorContext}{
}{}
\umlclass[y=\parRow,x=\collCol]{ParallelCollector}{
}{}
\umlclass[y=\simpleRow,x=\collCol]{SimpleCollector}{
}{}
\umlclass[y=\stwRow,x=\collCol]{{S.T.W.}Collector}{
}{}

\umlclass[y=\planRow,x=\conCol]{PlanConstraints}{
}{}
\umlclass[y=\simpleRow,x=\conCol]{SimpleConstraints}{
}{}
\umlclass[y=\stwRow,x=\conCol]{{S.T.W.}Constraints}{
}{}

\umlemptyclass[y=\planRow,x=\traceCol,type=abstract]{TransitiveClosure}{
}{}
\umlclass[y=\parRow,x=\traceCol]{TraceLocal}{
}{}

\begin{umlpackage}{{{org.mmtk.}plan.}marksweep}
\umlclass[y=\msRow,x=\planCol]{MS}{
}{}
\umlclass[y=\msRow,x=\mutCol]{MSMutator}{
}{}
\umlclass[y=\msRow,x=\collCol]{MSCollector}{
}{}
\umlclass[y=\msRow,x=\conCol]{MSConstraints}{
}{}
\umlclass[y=\msRow,x=\traceCol]{MSTraceLocal}{
}{}
\end{umlpackage}
\end{umlpackage}

\umlinherit[geometry=-|]{Simple}{Plan}
\umlinherit[geometry=-|]{StopTheWorld}{Simple}
\umlinherit[geometry=-|]{MS}{StopTheWorld}

\umlinherit[geometry=-|]{SimpleMutator}{MutatorContext}
\umlinherit[geometry=-|]{{S.T.W.}Mutator}{SimpleMutator}
\umlinherit[geometry=-|]{MSMutator}{{S.T.W.}Mutator}

\umlinherit[geometry=-|]{ParallelCollector}{CollectorContext}
\umlinherit[geometry=-|]{SimpleCollector}{ParallelCollector}
\umlinherit[geometry=-|]{{S.T.W.}Collector}{SimpleCollector}
\umlinherit[geometry=-|]{MSCollector}{{S.T.W.}Collector}

\umlinherit[geometry=-|]{SimpleConstraints}{PlanConstraints}
\umlinherit[geometry=-|]{{S.T.W.}Constraints}{SimpleConstraints}
\umlinherit[geometry=-|]{MSConstraints}{{S.T.W.}Constraints}

\umlinherit[geometry=-|]{TraceLocal}{TransitiveClosure}
\umlinherit[geometry=-|]{MSTraceLocal}{TraceLocal}

\umlassoc[geometry=-|,mult1={1},pos1=0.8,mult2={1..1},pos2=0.1]{Plan}{PlanConstraints}

\end{tikzpicture}

